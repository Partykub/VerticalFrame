# üìÑ Auto-Reframe AI Pipeline: Project Summary

**Updated:** 2026-01-29
**Status:** ‚úÖ Production Ready (Offline Mode)

---

## 1. üéØ Project Objective
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (Horizontal 16:9) ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á (Vertical 9:16) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Social Media (TikTok, Reels, Shorts) ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ AI ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô "‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö" (Director) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏Å‡∏≤‡∏£ Crop ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á

---

## 2. üèóÔ∏è System Architecture (The "Offline" Pipeline)
‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö **Multi-Pass Offline** ‡∏ã‡∏∂‡πà‡∏á‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô 3+1 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ **"‡∏£‡∏π‡πâ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï" (Look-Ahead)** ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î

### üîÑ Phase 1: Scanner (The Eyes)
*   **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏Å‡∏ß‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡∏à‡∏ô‡∏à‡∏ö (Frame 0 -> End)
*   **AI Models:** ‡πÉ‡∏ä‡πâ 3 ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏°:
    1.  **YOLOv8:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ô (Body Detection) ‡∏û‡∏£‡πâ‡∏≠‡∏° Tracking ID
    2.  **MediaPipe:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (Face Detection) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á
    3.  **Spectral Residual Saliency:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û (Attention Map) ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô
*   **Output:** `temp_tracking_data.json` (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å tracked tracks ‡πÅ‡∏•‡∏∞ saliency ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)

### üß† Phase 2: Analyzer (The Brain)
*   **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Phase 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á "‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á" (Camera Path)
*   **Logic ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**
    *   **Smart Director:** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ï‡∏≤‡∏° Priority (Face > Body > Saliency)
    *   **Look-Ahead:** ‡∏°‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏ä‡πá‡∏≠‡∏ï‡πÑ‡∏õ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (‡πÄ‡∏ä‡πà‡∏ô 60 ‡πÄ‡∏ü‡∏£‡∏°) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≤‡∏ô‡πÑ‡∏´‡∏°
    *   **Camera Smoothing:** ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•‡∏î‡πâ‡∏ß‡∏¢ Easing Functions
*   **Output:** `temp_camera_path.json` (‡∏û‡∏¥‡∏Å‡∏±‡∏î X ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏ü‡∏£‡∏°)

### üé® Phase 3: Renderer (The Hands)
*   **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ô‡∏≥‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å Phase 2 ‡∏°‡∏≤ Crop ‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á
*   **Output:** ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á)

### üîä Phase 4: Audio Merge (The Post-Production)
*   **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ô‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏°‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
*   **Tech:** ‡πÉ‡∏ä‡πâ **FFmpeg** ‡∏ú‡πà‡∏≤‡∏ô `subprocess`
*   **Cross-Platform:** ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Windows (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡πà‡∏≤‡∏ô WSL Bridge), Linux, ‡πÅ‡∏•‡∏∞ Mac ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## 3. üí° Core Intelligence & Logic

### 3.1 Director Priorities (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô Director ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:
1.  **Face (‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤):** ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
2.  **Body (‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ô):** ‡∏£‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏≤ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î, Focus ‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏Å)
3.  **Saliency (‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô):** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡∏Ñ‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡πà‡∏≤‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏ß‡∏¥‡∏ß)
4.  **Center:** ‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏¢ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏∑‡∏î‡πÅ‡∏õ‡∏î‡∏î‡πâ‡∏≤‡∏ô)

### 3.2 Smart Lock & Look-Ahead üîÆ
‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡πà‡∏≤‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏°‡∏≤‡∏ï‡∏≤‡∏° Track ID ‡∏°‡∏±‡πà‡∏ß‡∏ã‡∏±‡πà‡∏ß ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
*   **Holding Lock:** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ID ‡πÑ‡∏´‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞ "‡∏Å‡∏≠‡∏î" ‡πÑ‡∏ß‡πâ‡πÅ‡∏ô‡πà‡∏ô ‡πÅ‡∏°‡πâ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤
*   **Smart Switching:** ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠:
    *   **Priority Upgrade:** (‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ó‡∏≥!) ‡∏ñ‡πâ‡∏≤ Lock Body ‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏à‡∏≠ Face -> **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ**
    *   **Future Validation:** ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ß‡πà‡∏≤ "‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏≠‡∏µ‡∏Å 1 ‡∏ß‡∏¥" ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà Noise

---

## 4. üé• Camera Control Features

### 4.1 Easing Types (‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á)
‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Mathematics Easing 7 ‡πÅ‡∏ö‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô:
*   `linear`: ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
*   `ease_in`, `sine_in`: ‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏ä‡πâ‡∏≤ -> ‡πÄ‡∏£‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ó‡∏µ‡πà‡∏û‡∏∏‡πà‡∏á‡πÑ‡∏õ)
*   `ease_out`, `sine_out`: ‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡πá‡∏ß -> ‡∏à‡∏≠‡∏î‡∏ô‡∏¥‡πà‡∏° (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏ß‡∏≤‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)
*   `ease_in_out`, `sine_in_out`: (Recommended) ‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏ö

### 4.2 Stabilization
*   **Dead Zone:** ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà "‡πÇ‡∏ã‡∏ô‡∏ï‡∏≤‡∏¢" ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á ‡∏ñ‡πâ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏Ç‡∏¢‡∏±‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏ô‡∏µ‡πâ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≤‡∏° (‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏≤‡∏Å‡∏•‡πâ‡∏≠‡∏á)

---

## 5. üõ†Ô∏è Tech Stack & Dependencies

*   **Language:** Python 3.8+
*   **Computer Vision:**
    *   `ultralytics` (YOLOv8)
    *   `mediapipe` (Face Mesh)
    *   `opencv-python` (Image Processing)
    *   `supervision` (ByteTracker)
*   **Media Processing:** `ffmpeg` (Audio/Video Muxing)
*   **Environment:** Windows (WSL2), Linux (Ubuntu)

---

## 6. üìÇ Key Files Structure

*   `auto_reframe.py` - ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å (Main Entry Point) ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Flow 1-4
*   `config.json` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á (Sensitivity, Easing Type, Saliency)
*   `modules/pipeline/`
    *   `scanner.py` - Phase 1 (AI Detection)
    *   `analyzer.py` - Phase 2 (Logic & Smoothing)
    *   `renderer.py` - Phase 3 (Cropping & Visualizing)
*   `modules/core/director.py` - ‡∏™‡∏°‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
*   `FOCUS_LOGIC.md` - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Logic ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

---
*Generated by Antigravity*
