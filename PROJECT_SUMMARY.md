# üìÑ Auto-Reframe AI Pipeline: Project Summary

**Updated:** 2026-01-29
**Status:** ‚úÖ Production Ready 2.0 (High-Fidelity)

---

## 1. üéØ Project Objective
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (Horizontal 16:9) ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á (Vertical 9:16) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Social Media (TikTok, Reels, Shorts) ‡πÇ‡∏î‡∏¢‡∏°‡∏∏‡πà‡∏á‡πÄ‡∏ô‡πâ‡∏ô **‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Visually Lossless)** ‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡πÅ‡∏•‡∏∞ Editor ‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡πÄ‡∏ü‡∏£‡∏°

---

## 2. üèóÔ∏è System Architecture (The "Lossless" Pipeline)
‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö **3-Stage Offline Process** ‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ (Data Integrity)

### üîÑ Phase 1: Scanner (The Eyes)
*   Scanning ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Frame-by-Frame) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö
*   **AI Stack:** Hybrid 3 Layers
    1.  **YOLOv8:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ô (Body) ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á
    2.  **MediaPipe:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (Face) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏£‡∏π‡∏Ç‡∏∏‡∏°‡∏Ç‡∏ô
    3.  **Saliency Map:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö "‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à" (Visual Saliency) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏â‡∏≤‡∏Å
*   **Output:** `temp_tracking_data.json`

### üß† Phase 2: Analyzer (The Brain)
*   **Look-Ahead Buffer:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ 60 ‡πÄ‡∏ü‡∏£‡∏°+ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÅ‡∏û‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÉ‡∏Ñ‡∏£
*   **Smoothing Engine:** ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå `Sine-In-Out Easing` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏•‡∏ô‡∏™‡πå‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πâ‡∏≤-‡πÄ‡∏£‡πà‡∏á-‡∏à‡∏ö‡∏ä‡πâ‡∏≤) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Linear Robot Movement
*   **Output:** `temp_camera_path.json`

### üé® Phase 3: High-Fidelity Renderer (The Heart of Quality) üåü
**Major Upgrade (2026-01-29):** ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å OpenCV Writing ‡πÄ‡∏õ‡πá‡∏ô **Direct FFmpeg Piping**
*   **Process:**
    1.  `OpenCV` ‡∏≠‡πà‡∏≤‡∏ô Raw Pixel Matrix (BGR) ‡∏à‡∏≤‡∏Å Source ‡∏•‡∏á RAM
    2.  ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡∏ú‡πà‡∏≤‡∏ô `stdin pipe` ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà FFmpeg Process ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Save ‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JPG ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á)
    3.  FFmpeg ‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏¢ **libx264 (CRF 18)** ‡πÅ‡∏•‡∏∞ **Preset Slow**
*   **Result:**
    *   **Bitrate ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô ~3 ‡πÄ‡∏ó‡πà‡∏≤** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤ Detail ‡∏Ç‡∏≠‡∏ö‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£ Crop
    *   **Visually Lossless:** ‡∏ï‡∏≤‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÅ‡∏¢‡∏Å‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Source ‡∏Å‡∏±‡∏ö Output
    *   **Integrity Check:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡πÄ‡∏ü‡∏£‡∏° Input vs Output ‡∏ï‡∏≠‡∏ô‡∏à‡∏ö‡∏á‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ü‡∏£‡∏°‡∏´‡∏≤‡∏¢ (Frame Drop = 0)

---

## 3. üí° Core Intelligence Features

### 3.1 Smart Priority System
Director AI ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Hierarchy):
1.  **Face (‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤):** ‡∏û‡∏£‡∏∞‡πÄ‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á (‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ Lock ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
2.  **Body (‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ô):** ‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏Ñ‡πà‡∏ï‡∏±‡∏ß ‡πÉ‡∏´‡πâ Lock ‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏Å (Upper Body)
3.  **Saliency (Context):** ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô ‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏î‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏â‡∏≤‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡πÅ‡∏°‡∏ß, ‡∏ß‡∏¥‡∏ß)

### 3.2 Dynamic Argumentation
*   **--debug-view:** ‡πÇ‡∏´‡∏°‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dev/QC ‡∏à‡∏∞ Render ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ö‡∏ö 2 ‡∏à‡∏≠ (‡∏ã‡πâ‡∏≤‡∏¢: ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö+Overlay, ‡∏Ç‡∏ß‡∏≤: ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ AI ‡∏Ñ‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏π‡πà
*   **Auto-Fallback:** ‡∏ñ‡πâ‡∏≤ User ‡πÑ‡∏°‡πà‡∏™‡∏±‡πà‡∏á‡∏≠‡∏∞‡πÑ‡∏£ ‡∏à‡∏∞ Render ‡πÅ‡∏ö‡∏ö Clean Vertical (9:16) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

---

## 4. üõ†Ô∏è Tech Stack & Dependencies

### Core Engine
*   **Python:** 3.8+
*   **FFmpeg (Binary):** ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Video/Audio (‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô `subprocess` pipe)

### AI & Vision
*   `ultralytics` (YOLOv8)
*   `mediapipe` (Face Mesh)
*   `opencv-python` (Image Processing & Raw Data Handling)
*   `supervision` (ByteTracker Algorithm)

### Mathematics & Logic
*   `numpy` (Matrix Operations)
*   `scipy` (Signal Processing / Smoothing)

---

## 5. üìä Quality Assurance Metrics

| Parameter | Value | Meaning |
| :--- | :--- | :--- |
| **Pipeline Mode** | Offline | ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå (Non-Realtime) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ |
| **Video Codec** | H.264 (libx264) | ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≤‡∏Å‡∏• ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å Platform |
| **Compression** | **CRF 18** | High Quality (Visually Lossless) |
| **Audio Codec** | AAC | High Fidelity Sound |
| **Frame Drop** | 0.00% | ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Integrity Check System |

---
*Created by Antigravity Team*
